<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.151.1">
    <meta name="description" content="">


    <link rel="icon" href="/images/favicon.png" type="image/png">

    <title>Creating nodes :: My New Hugo Site</title>

    
    <link href="/css/nucleus.css?1761055806" rel="stylesheet">
    <link href="/css/fontawesome-all.min.css?1761055806" rel="stylesheet">
    <link href="/css/hybrid.css?1761055806" rel="stylesheet">
    <link href="/css/featherlight.min.css?1761055806" rel="stylesheet">
    <link href="/css/perfect-scrollbar.min.css?1761055806" rel="stylesheet">
    <link href="/css/auto-complete.css?1761055806" rel="stylesheet">
    <link href="/css/atom-one-dark-reasonable.css?1761055806" rel="stylesheet">
    <link href="/css/theme.css?1761055806" rel="stylesheet">
    <link href="/css/tabs.css?1761055806" rel="stylesheet">
    <link href="/css/hugo-theme.css?1761055806" rel="stylesheet">
    
    <link href="/css/theme-blue.css?1761055806" rel="stylesheet">
    
    

    <script src="/js/jquery-3.3.1.min.js?1761055806"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="/ros2-concepts/ros2-nodes/">
    <nav id="sidebar" class="showVisitedLinks">



  <div id="header-wrapper">
    <div id="header">
      
    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/js/lunr.min.js?1761055806"></script>
<script type="text/javascript" src="/js/auto-complete.js?1761055806"></script>
<script type="text/javascript">
    
        var baseurl = "http:\/\/localhost:1313\/";
    
</script>
<script type="text/javascript" src="/js/search.js?1761055806"></script>

    
  </div>
  

    <div class="highlightable">
    <ul class="topics">

        
          
          




 
  
    
    <li data-nav-id="/installation-and-setup/" title="Getting started &amp; Installation" class="dd-item
        
        
        
        ">
      <a href="/installation-and-setup/">
          <b>I. </b>Getting started &amp; Installation
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/installation-and-setup/prerequisites/" title="Prerequisites" class="dd-item ">
        <a href="/installation-and-setup/prerequisites/">
        Prerequisites
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/installation-and-setup/installation/" title="Installation" class="dd-item ">
        <a href="/installation-and-setup/installation/">
        Installation
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/ros2-concepts/" title="Core Concepts of ROS2" class="dd-item
        parent
        
        
        ">
      <a href="/ros2-concepts/">
          <b>II. </b>Core Concepts of ROS2
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/ros2-concepts/defining-the-robot/" title="Defining a robot" class="dd-item ">
        <a href="/ros2-concepts/defining-the-robot/">
        Defining a robot
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/ros2-concepts/what-is-robot-programming/" title="What is robot programming?" class="dd-item ">
        <a href="/ros2-concepts/what-is-robot-programming/">
        What is robot programming?
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/ros2-concepts/ros2-packages/" title="Preparing packages" class="dd-item ">
        <a href="/ros2-concepts/ros2-packages/">
        Preparing packages
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/ros2-concepts/ros2-nodes/" title="Creating nodes" class="dd-item active">
        <a href="/ros2-concepts/ros2-nodes/">
        Creating nodes
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/ros2-concepts/ros2-build-system/" title="The colcon build tool" class="dd-item ">
        <a href="/ros2-concepts/ros2-build-system/">
        The colcon build tool
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/ros2-concepts/ros2-communication-nodes/" title="Communication between nodes" class="dd-item ">
        <a href="/ros2-concepts/ros2-communication-nodes/">
        Communication between nodes
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/ros2-concepts-advanced/" title="Advanced Concepts of ROS2" class="dd-item
        
        
        
        ">
      <a href="/ros2-concepts-advanced/">
          <b>III. </b>Advanced Concepts of ROS2
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/ros2-concepts-advanced/executors/" title="Executors" class="dd-item ">
        <a href="/ros2-concepts-advanced/executors/">
        Executors
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/ros2-ecosystem/" title="The ROS2 Ecosystem" class="dd-item
        
        
        
        ">
      <a href="/ros2-ecosystem/">
          <b>V. </b>The ROS2 Ecosystem
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
    </li>
  
 

          
        
    </ul>

    
    

    
    <section id="prefooter">
      <hr/>
      <ul>
      

      
        <li><a class="padding" href="#" data-clear-history-toggle=""><i class="fas fa-history fa-fw"></i> Clear History</a></li>
      
      </ul>
    </section>
    
    <section id="footer">
      <p>Built with <a href="https://github.com/matcornic/hugo-theme-learn"><i class="fas fa-heart"></i></a> from <a href="https://getgrav.org">Grav</a> and <a href="https://gohugo.io/">Hugo</a></p>

    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='/'>Home</a> > <a href='/ros2-concepts/'>Core Concepts of ROS2</a> > Creating nodes
          
        
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              Creating nodes
            </h1>
          

        


<h4 id="building-a-ros2-node">Building a ROS2 Node</h4>
<p>In this part of the tutorial series we want to specify an individual ROS2 node, and get an idea of how it looks like. As most of the functionality of ROS2 is centered around nodes, this tutorial is not encompassing all parts of Nodes. We will not get into executors, launch files and similar topics. These will have to wait until later. For now, the goal is to understand from a high-level perspective how Nodes work, and what you can do with them. Everything that goes on under the hood is a topic for a later chapter of this series.</p>
<h4 id="the-client-libraries">The client libraries</h4>
<p>When we are talking about ROS2 development, or robotic software development with ROS as a whole, we are usually talking about writing <em>application level code</em>. We are not interested in how ROS2 works itself, instead we rely on the <em>Application Programming Interface</em> (API) that it provides, to interact with what is essentially a black box system to us (Even though we will shed light on the inner workings later in this tutorial series).</p>
<p>ROS2 itself is a binary program installed on your operating system, much the same as Firefox, Thunderbird or Octave. This is the program where all of the actual computation happens, and it is colloquially known as the ROS2-Core. It provides interfaces to other components on your computer, to perform actions.</p>
<p>The interface that ROS2 itself, the binary that we would install on our computer, provides however is not easy to use! The goal when designing it, was to enable fast, efficient and scalable processes, not to enhance programmer experience. Also, the way one would interact with this, does not follow the order of logical software development for robotics. It is in many ways a <em>deep API</em>, that provides a lot of functionality with few interfaces.</p>

<div class="notices tip" ><p>Beyond the scope of this tutorial series, if you are interested in some interesting notes on how API&rsquo;s in software could (should?) be designed, see <a href="https://www.youtube.com/watch?v=bmSAYlu0NcY">this</a> excellent talk on the topic. This is not in any way related to robotics, and is not required for this course however, and should be treated as further reading.</p>
</div>

<p>To enable us to write application code, i.e. nodes, packages and other structures within ROS2 in a way that makes sense to human robotics programmers, the ROS2 project provides client libraries. These libraries provide us with an abstraction layer to the &ldquo;real&rdquo; ROS2 system, that makes definitions of features easier. In these client libraries, we can find functions to create, start and stop nodes, to send information between nodes, to set parameters and much more. The client library internally translates these requirements into API calls for the actual ROS2 programm, that is running on our computer.
The avaliability of this client library also determines if we can write ROS2 code in a particular programming language.</p>
<p>In general all clinet libraries contain the string <code>rcl</code> somewhere in their name, this stands for <em>Ros Client Library</em>. Two core client libraries that we will use are called <code>rclcpp</code> for C++ and <code>rclpy</code> for use with the python programming language. With these two being the most widley used client libraries, there are however ROS2 client libraries for a wide range of programming languages, for example <code>rclc</code> for C, <code>rclrs</code> for Rust and even <code>rclnodejs</code> for interaction with Node.js systems.</p>
<p><img src="/images/ch2-nodes-black-box.png" alt="Image 2: Schematic view of the ROS2 node setup"></p>
<p>Another great advantage of the client library system is that we can mix and match programming languages within the same ROS2 project! For example, we can write our high level code controlling overall behaviour of the robot in python using <code>rclpy</code> as it is easier to develop and interate on, and use C++ with <code>rclcpp</code> to develop the performance sensitive parts of the real time control loops for our motors. At the core of our system is the ROS2 core, and the interface that defines how we talk to said core, is implemented in both programming languages, so we can talk to the same core in the same project at the same time.</p>
<p><img src="/images/ch2-nodes-multiple-client-libraries.png" alt="Image 2: Schematic view of the ROS2 node setup"></p>
<p>So, in order to tell the core ROS2 installation on our computer what to do, we use the ROS2 client libraries to specify our application level code, i.e. nodes. If you are are looking for documentation on ROS2, you are most likley really looking for documentation on one of the ROS2 client libraries.</p>
<h4 id="what-is-a-node">What is a node?</h4>
<p>To make use of a client library and implement a ROS2 feature, let us familiarize ourself with the concept of a node first. Remember that in the introduction, we talked about splitting the project up into several different components, much the same way as the mechanical robot is made up of different parts, i.e. motors, gearboxes, batteries, etc. Every single process in a robot, we will put in a node!</p>
<p>A node in ROS2 is a fundamental element, that serves a single modular purpose and implements a specific process. A ull robotic system, e.g. the whoel software that is controlling our exoskeleton, is comprised of many nodes that are working together. A node is a self contained process,  and is also executed as one (more on that later!).</p>
<h4 id="building-a-ros2-node-in-python">Building a ROS2 node in Python</h4>
<p>We now want to apply this concept to practice, and make a functioning ROS2 node. As it is easier to read and follow for the most part, we will first explain the concept on the example of a ROS2 python node using the <code>rclpy</code> client library.</p>
<p>First we have to create a new file where the node will live. It is good practice to create a separate file for each node that you are developing. To make sure that the build process runs smoothly, its also important that the nodes are created within the folder of a package that is named just like the package itself. You have to create a ROS2 node inside of a package, otherwise the build process will not work correctly and your node is unusable. In the case of this example, we will create a new node inside the practice project we have created for the <a href="/ros2-concepts/ros2-packages">first</a> part of this tutorial, dealing with packages. Open up the same docker container and navigate to the package <code>ros2-sample-package-python</code>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>cd ros2-sample-package-python
</span></span></code></pre></div><p>Once inside, navigate to the folder <code>ros2-sample-package-python</code> by executing the same command again. You should now be inside the folder with the same name as the package. In here, you can create a new file using the <code>touch</code> utility. If you have the VScode instance connected, you can also use the new file button in te code editor to create a new file with the name <code>sample_node.py</code>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>touch sample_node.py
</span></span></code></pre></div><p>Now open up the new file with the VScode code editor, or Vim if you prefer a terminal based approach. This is the file where we will create a new node in. The new node will have the same name as the file, however this is not strictly required and only best practice to do so. Initially we want to import the ROS2 client library for use with python, as we are in a python package.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> rclpy
</span></span></code></pre></div><p>To make our code more legible and to prevent overly long function names, we want to import <code>Node</code> seperatly from the <code>rclpy</code> library as well</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">from</span> rclpy.node <span style="color:#f92672">import</span> Node
</span></span></code></pre></div><p>We have now imported all prerequisites that are needed to build a ROS2 node. The <code>Node</code> object we imported is a class element, that we will use to create another instance of that class which will house the code that makes our node. Create a new instance of this in the code, by adding this to the file</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">SampleNode</span>(Node):
</span></span></code></pre></div><p>Every ROS2 node requires an <code>__init__</code> function, to provide functionality and become executable. This function defines the initialisation of the node and specifys some information that is required for the ROS2 core to allow the node to be useful. This <code>__init__</code> function consists of several lines of code.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">__init__</span>(self):
</span></span><span style="display:flex;"><span>    super()<span style="color:#f92672">.</span><span style="color:#a6e22e">__init__</span>(<span style="color:#e6db74">&#39;sample_node&#39;</span>)
</span></span></code></pre></div><p>With <code>super().__init__('sample_node')</code> we have defined the name of the function to the rest of the ROS2 ecosystem. In theory you can add any name you want here, it would however create confusion and it&rsquo;s therefore best practice to keep this the same as the file name. Additionally, the <code>__init__</code> function does very much the same as any other python class. You can declare attributes of the class, i.e. variables by doing <code>self.someVariable</code>. There are a few other ROS2 features that will have to be declared in the <code>__init__</code> function, which we will discuss later. As our code is not doing much at the moment, lets add a print statement to the <code>__init__</code> function that we can see when executing the Node later. Your overall code should now look like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> rclpy
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> rclpy <span style="color:#f92672">import</span> Node
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">SampleNode</span>(Node):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">__init__</span>(self):
</span></span><span style="display:flex;"><span>        super()<span style="color:#f92672">.</span><span style="color:#a6e22e">__init__</span>(<span style="color:#e6db74">&#39;sample_node&#39;</span>)
</span></span><span style="display:flex;"><span>        print(<span style="color:#e6db74">&#34;This node works!&#34;</span>)
</span></span></code></pre></div><p>In doing so, you have just created a ROS2 node. Congratulations! As of now tho, we can not run the Node as there is no code that executes it. We add this, usually in the same file, by building a <code>main</code> function. This also applies to out python files, even though <code>main</code> functions are usually used in C++ projects. The structure of such a <code>main</code> function is quite standardized, and looks similar across many different nodes.</p>
<p>First we dont want our function to accept any arguments for now, however it&rsquo;s best to explicitly type this, to prevent problems. Then we have to initialize the <code>rclpy</code> connection by calling <code>rclpy.init()</code>. ROS2 considers the file that we are in a so called context, calling <code>rclpy.init()</code> initializes ROS2 for the first time in this context and connects the file with ROS2.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">main</span>(args<span style="color:#f92672">=</span><span style="color:#66d9ef">None</span>):
</span></span><span style="display:flex;"><span>    rclpy<span style="color:#f92672">.</span>init(args<span style="color:#f92672">=</span>args)
</span></span></code></pre></div><p>Next we have to create an instance of the class that is our node, and that we have defined in the same file above. To do so, we use the following code</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>sample_node <span style="color:#f92672">=</span> SampleNode()
</span></span></code></pre></div><p>Next stop is starting the ROS2 node. This happens using an executor, and there are several options on how to do this. For now, we will not go into detail here, just know that <code>spin</code> starts a ROS2 node, and make it execute indefinitly unless we either interrupt it manually or the garbage collector picks up the object when it is no longer in use, i.e. the whole ROS2 system has shut down. To make the node interruptable manually, we add a <code>try execpt</code> structure to listen for a <code>KeyboardInterrupt</code>. Whenever the KeyboardInterrupt is registered, we will call the <code>destroy_node()</code> method on the instance of the node to destroy the node. Afterwards we can close the ROS2 context, as no more actions are performed. This helps keep ROS2 clean and working properly. The whole <code>main</code> function should look like this after implementing the changes:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">main</span>(args<span style="color:#f92672">=</span><span style="color:#66d9ef">None</span>):
</span></span><span style="display:flex;"><span>    rclpy<span style="color:#f92672">.</span>init(args<span style="color:#f92672">=</span>args)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">try</span>:
</span></span><span style="display:flex;"><span>        sample_node <span style="color:#f92672">=</span> SampleNode()
</span></span><span style="display:flex;"><span>        rclpy<span style="color:#f92672">.</span>spin(sample_node)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">except</span> <span style="color:#a6e22e">KeyboardInterrupt</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">pass</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">finally</span>:
</span></span><span style="display:flex;"><span>        sample_node<span style="color:#f92672">.</span>destroy_node()
</span></span><span style="display:flex;"><span>        rclpy<span style="color:#f92672">.</span>shutdown()
</span></span></code></pre></div><p>Now your ROS2 sample node is runnable and can be executed! However, there is currently no way for ROS2 to discover the node or to understand our keyboard inputs that this node is to be run. Also, we have used <code>rclpy</code> in this code, and have to specify this as a dependency of the package where the node is contained in. To add these, navigate back to the package root directory where you will find <code>package.xml</code> and <code>setup.py</code>.</p>
<p>Within <code>package.xml</code> we will have to note <code>rclpy</code> as a dependency of the package, do this by adding an <code>exec_depend</code> tag into the file, which should look something like this afterwards. While we are at it, also change the <code>version</code>, <code>description</code> and <code>maintainer</code> tags to fit with a name and a sample email.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#75715e">&lt;?xml version=&#34;1.0&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">&lt;?xml-model href=&#34;http://download.ros.org/schema/package_format3.xsd&#34; schematypens=&#34;http://www.w3.org/2001/XMLSchema&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;package</span> <span style="color:#a6e22e">format=</span><span style="color:#e6db74">&#34;3&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;name&gt;</span>ros2-sample-package-python<span style="color:#f92672">&lt;/name&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;version&gt;</span>0.1.0<span style="color:#f92672">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;description&gt;</span>This is some description<span style="color:#f92672">&lt;/description&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;maintainer</span> <span style="color:#a6e22e">email=</span><span style="color:#e6db74">&#34;maintainer@someorg.com&#34;</span><span style="color:#f92672">&gt;</span>Maintainer Name<span style="color:#f92672">&lt;/maintainer&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;license&gt;</span>Apache-2.0<span style="color:#f92672">&lt;/license&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;test_depend&gt;</span>ament_copyright<span style="color:#f92672">&lt;/test_depend&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;test_depend&gt;</span>ament_flake8<span style="color:#f92672">&lt;/test_depend&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;test_depend&gt;</span>ament_pep257<span style="color:#f92672">&lt;/test_depend&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;test_depend&gt;</span>python3-pytest<span style="color:#f92672">&lt;/test_depend&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;exec_depend&gt;</span>rclpy<span style="color:#f92672">&lt;/exec_depend&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;export&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;build_type&gt;</span>ament_python<span style="color:#f92672">&lt;/build_type&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;/export&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/package&gt;</span>
</span></span></code></pre></div><p>We have to define an entry point into the node, that specify to the ROS2 command line tools where a command should execute a node. To do this, open up the <code>setup.py</code> file. Here you find the section <code>entry_points</code>. What is mean twith entry points, is the shortcode that you call using the ROS2 CLI to execute that node. After building, which is described in the next chapter, you will be able to call the ROS2 command line interface with something like <code>ros2 run package entry_point</code>, specifying what <code>entry_point</code> should be is the purpose of this file. To make a testrun possible add this to the setup.py.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>entry_points<span style="color:#f92672">=</span>{
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#39;console_scripts&#39;</span>: [
</span></span><span style="display:flex;"><span>                <span style="color:#e6db74">&#39;test_our_node = ros2-sample-package-python.sample_node:main&#39;</span>,
</span></span><span style="display:flex;"><span>        ],
</span></span><span style="display:flex;"><span>},
</span></span></code></pre></div><p>By doing this we specify the entry point <code>test_our_node</code>, this means we will be able to call <code>ros2 run packageNameHere test_our_node</code> after building this package. The line is always structured in the same way, first we define the entry_point denominator, which must be unique within that package. Then we write the package name, and with a dot after that the file name in which we defined our node. With &lsquo;:&rsquo; we seperate that file name from the name of the function that we desginted to run ou node, which will most often be <code>main</code> but it could be any other function in which we call <code>rclpy.init()</code>. If we were to change the line to <code>'nodetesting = ros2-sample-package-python.sample_node:main'</code> the node would be launched with the commadn <code>ros2 run packageNameHere nodetesting</code>.</p>
<p>Now we are done with defining the node. before we can execute it however, we will have to build the package that the node is contained in and set our workspace up for executing it. This will be handled in the <a href="/ros2-concepts/ros2-build-system">next</a> tutorial.</p>


<footer class="footline">
	
</footer>

        
        </div>
        

      </div>

    <div id="navigation">
        
        

        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        

        


	 
	 
    </div>

    </section>

    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js?1761055806"></script>
    <script src="/js/perfect-scrollbar.min.js?1761055806"></script>
    <script src="/js/perfect-scrollbar.jquery.min.js?1761055806"></script>
    <script src="/js/jquery.sticky.js?1761055806"></script>
    <script src="/js/featherlight.min.js?1761055806"></script>
    <script src="/js/highlight.pack.js?1761055806"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/modernizr.custom-3.6.0.js?1761055806"></script>
    <script src="/js/learn.js?1761055806"></script>
    <script src="/js/hugo-learn.js?1761055806"></script>
    
        
            <script src="https://unpkg.com/mermaid@8.8.0/dist/mermaid.min.js"></script>
        
        <script>
            mermaid.initialize({ startOnLoad: true });
        </script>
    
    

  </body>
</html>

